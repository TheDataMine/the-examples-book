= Data.frames

Data.frames are one of the primary data structure used very frequently when working in R. Data.frames are tables of same-sized, named columns, where each column has a single type.

You can create a data.frame easily:

[source, R]
----
df <- data.frame(cat_1=c(1,2,3), cat_2=c(9,8,7), ok=c(T, T, F), other=c("first", "second", "third"))
head(df)
----
[source, R]
----
  cat_1 cat_2    ok  other
1     1     9  TRUE  first
2     2     8  TRUE second
3     3     7 FALSE  third
----

Regular indexing rules apply as well. This is how you index rows. Pay close attention to the trailing comma:

[source, R]
----
# Numeric indexing on rows:
df[1:2,]
----
[source, R]
----
  cat_1 cat_2   ok  other
1     1     9 TRUE  first
2     2     8 TRUE second
----
[source, R]
----
df[c(1,3),]
----
[source, R]
----
  cat_1 cat_2    ok other
1     1     9  TRUE first
3     3     7 FALSE third
----
[source, R]
----
# Logical indexing on rows:
df[c(T,F,T),]
----
[source, R]
----
  cat_1 cat_2    ok other
1     1     9  TRUE first
3     3     7 FALSE third
----
[source, R]
----
# Named indexing on rows only works 
# if there are named rows:
row.names(df) <- c("row1", "row2", "row3")
df[c("row1", "row3"),]
----
[source, R]
----
     cat_1 cat_2    ok other
row1     1     9  TRUE first
row3     3     7 FALSE third
----

By default, if you don't include the comma in the square brackets, you are indexing the column:

[source, R]
----
df[c("cat_1", "ok")]
----
[source, R]
----
     cat_1    ok
row1     1  TRUE
row2     2  TRUE
row3     3 FALSE
----

To index columns, place expressions after the first comma:

[source, R]
----
# Numeric indexing on columns:
df[, 1]
----
[source, R]
----
[1] 1 2 3
----
[source, R]
----
df[, c(1,3)]
----
[source, R]
----
     cat_1    ok
row1     1  TRUE
row2     2  TRUE
row3     3 FALSE
----
[source, R]
----
# Logical indexing on columns:
df[, c(T, F, F, F)]
----
[source, R]
----
[1] 1 2 3
----
[source, R]
----
# Named indexing on columns.
# This is the more typical method of 
# column indexing:
df$cat_1
----
[source, R]
----
[1] 1 2 3
----
[source, R]
----
# Another way to do named indexing on columns:
df[,c("cat_1", "ok")]
----
[source, R]
----
     cat_1    ok
row1     1  TRUE
row2     2  TRUE
row3     3 FALSE
----

Of course, you can index on columns and rows:

[source, R]
----
# Numeric indexing on columns and rows:
df[1:2, 1]
----
[source, R]
----
[1] 1 2
----
[source, R]
----
df[1:2, c(1,3)]
----
[source, R]
----
     cat_1   ok
row1     1 TRUE
row2     2 TRUE
----
[source, R]
----
# Logical indexing on columns and rows:
df[c(T,F,T), c(T, F, F, F)]
----
[source, R]
----
[1] 1 3
----
[source, R]
----
# Named indexing on columns and rows.
# This is the more typical method of 
# column indexing:
df$cat_1[c(T,F,T)]
----
[source, R]
----
[1] 1 3
----
[source, R]
----
# Another way to do named indexing on columns and rows:
row.names(df) <- c("row1", "row2", "row3")
df[c("row1", "row3"),c("cat_1", "ok")]
----
[source, R]
----
     cat_1    ok
row1     1  TRUE
row3     3 FALSE
----

== Examples

=== How can I get the first 2 rows of a data.frame named `df`?

.Click to see solution
[%collapsible]
====
[source, R]
----
df <- data.frame(cat_1=c(1,2,3), cat_2=c(9,8,7), ok=c(T, T, F), other=c("first", "second", "third"))
df[1:2,]
----
[source, R]
----    
  cat_1 cat_2   ok  other
1     1     9 TRUE  first
2     2     8 TRUE second
----
====

=== How can I get the first 2 columns of a data.frame named `df`?

.Click to see solution
[%collapsible]
====
[source, R]
----
df[,1:2]
----
[source, R]
----
  cat_1 cat_2
1     1     9
2     2     8
3     3     7
----
====

=== How can I get the rows where values in the column named `cat_1` are greater than 2?

.Click to see solution
[%collapsible]
====
[source, R]
----
df[df$cat_1 > 2,]
----
[source, R]
----
  cat_1 cat_2    ok other
3     3     7 FALSE third
----
[source, R]
----
df[df[, c("cat_1")] > 2,]
----
[source, R]
----
  cat_1 cat_2    ok other
3     3     7 FALSE third
----
====

=== How can I get the rows where values in the column named `cat_1` are greater than 2 and the values in the column named `cat_2` are less than 9?

.Click to see solution
[%collapsible]
====
[source, R]
----
df[df$cat_1 > 2 & df$cat_2 < 9,]
----
[source, R]
----
  cat_1 cat_2    ok other
3     3     7 FALSE third
----
====

=== How can I get the rows where values in the column named `cat_1` are greater than 2 or the values in the column named `cat_2` are less than 9?

.Click to see solution
[%collapsible]
====
[source, R]
----
df[df$cat_1 > 2 | df$cat_2 < 9,]
----
[source, R]
----
  cat_1 cat_2    ok  other
2     2     8  TRUE second
3     3     7 FALSE  third
----
====

=== How do I sample _n_ rows randomly from a data.frame called `df`?

.Click to see solution
[%collapsible]
====
[source, R]
----
df[sample(nrow(df), n),]
----

Alternatively you could use the `sample_n` function from the package `dplyr`:

[source, R]
----
sample_n(df, n)
----
====

=== How can I get only columns whose names start with "cat_"?

.Click to see solution
[%collapsible]
====
[source, R]
----
df <- data.frame(cat_1=c(1,2,3), cat_2=c(9,8,7), ok=c(T, T, F), other=c("first", "second", "third"))
df[, grep("^cat_", names(df))]
----
[source, R]
----
  cat_1 cat_2
1     1     9
2     2     8
3     3     7
----
====