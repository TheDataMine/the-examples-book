= TDM 10200: Project 8 -- 2023

**Motivation:** We are going to take a step back and work towards building a beer recommendation system. As you know already, a key part of analysis is being able to write functions. 


**Context:**  We will continue to introduce functions and practice doing so! 

**Scope:** python, functions, pandas 


Make sure to read about, and use the template found xref:templates.adoc[here], and the important information about projects submissions xref:submissions.adoc[here].

== Dataset(s)

The following questions will use the following dataset(s):

-`/anvil/projects/tdm/data/yelp/data/parquet/`

== Questions
Let's first list all of the files in this folder 
.Helpful Hint
[%collapsible]
====
[source, python]
----
ls /anvil/projects/tdm/data/yelp/data/parquet/
----
====
We want to load *only* two `pandas` data frames to use in this project. We will not be working with the other data frames.
Don't forget to import pandas!
[source, python]
----
users = pd.read_parquet("/anvil/projects/tdm/data/yelp/data/parquet/users.parquet")
reviews = pd.read_parquet("/anvil/projects/tdm/data/yelp/data/parquet/reviews.parquet")
----

=== ONE

Typically we can assume that we surround ourselves with people with similar interests and we would have aligning tastes in restaurants and businesses. 
Let's check that by writing a function called `get_friends_data` with the `user_id` as an argument.
This new function should return a pandas DataFrame with the information in the `users` DataFrame for each friend of `user_id`.

In this function we want to add `type hints`.  We have added `type hints` in most of our functions so far this spring, but now we want to pay attention to them.
These `type hints` provide a formal way to indicate the type of arguments passed to a function in python.
You can learn more about python type hints https://www.pythontutorial.net/python-basics/python-type-hints/[here] or https://docs.python.org/3.8/library/typing.html[this] is another good site for information.
Go ahead and use `type hints` into your function. Use one for the `user_id` and one for the returned data. 

.Helpful Hint
[%collapsible]
====
a `type hint` for a string appears as `str` in our function
[source, python]
----
get_friends_data(myuserid: str)
----
====
.Items to submit
====
- Code used to answer the question. 
- Result of code.
====

=== TWO
Next, we need to write a function called `calculate_avg_business_stars` that accepts the `business_id` and returns the average number of stars that the business has received. 

Doing this we want to use the `groupby()` function.  This is one of the most powerful functions for (more easily) working with data frames in python.
.Insider Information
[%collapsible]
====
- groupby()- allows us group data according to categories and also can help us compile and summarize data easily. 
====

.Items to submit
====
- Code used to answer the question. 
- Result of code.
====

=== THREE

Next up, we need to write a function called `visualize_stars_over_time`. It needs to accept a `business_id` as an argument.  It should make a line plot that shows the average number of stars for each year that the business has reviews. 

.Helpful Hint
[%collapsible]
====
You will need to import matplotlib.pyplot as plt
====



=== FOUR
We are now going to add an argument to our function `visualize_stars_over_time` that we wrote in question 3. This argument is called `granularity`. Granularity should accept one of two strings, either `"years"` or `"months"` (don't forget the double quotes!) that will help show the average rating over time. 

.Insider Information 
[%collapsible]
====
Granularity indicates how much data can be shown on a chart. It can expressed in units of time, it can be - "minute" - "hour" - "day" - "week" - "month" - "year".
====

.Items to submit
====
- Code used to answer the question
- Result of the code 
====



=== FIVE

Now we continue to modify the function `visualize_stars_over_time` that we were working on, from questions 3 and 4. We want to add the ability to accept multiple business_ids, and create a line for each id. 

.Items to submit
====
- Code used to answer the question
- Result of the code 
====


[WARNING]
====
_Please_ make sure to double check that your submission is complete, and contains all of your code and output before submitting. If you are on a spotty internet connection, it is recommended to download your submission after submitting it to make sure what you _think_ you submitted, was what you _actually_ submitted.
                                                                                                                             
In addition, please review our xref:submissions.adoc[submission guidelines] before submitting your project.
====