= Writing Functions in R

== Examples

=== Use the `longesttest` function to print the longest name in the `NAME` column of the 1980 election data.
[source,R]
----
longesttest <- function(x) {x[which.max(nchar(x))]}
----

.Click to see solution
[%collapsible]
====
[source,R]
----
library(data.table)
myDF <- fread("/anvil/projects/tdm/data/election/itcont1980.txt", quote="")
names(myDF) <- c("CMTE_ID", "AMNDT_IND", "RPT_TP", "TRANSACTION_PGI", "IMAGE_NUM", "TRANSACTION_TP", "ENTITY_TP", "NAME", "CITY", "STATE", "ZIP_CODE", "EMPLOYER", "OCCUPATION", "TRANSACTION_DT", "TRANSACTION_AMT", "OTHER_ID", "TRAN_ID", "FILE_NUM", "MEMO_CD", "MEMO_TEXT", "SUB_ID")
longesttest <- function(x) {x[which.max(nchar(x))]}

longesttest(myDF$NAME)
----
----
'REPUBLICAN NATIONAL COMMITTEE - CONTRIBUTIONS (AKA REPUBLICAN NATIONAL FINANCE COMMITTEE' 
----
====

=== Using the itcont1980.txt file, create your own function called `mostpopulardate` that finds the most popular date in a column of dates, as well as the number of times that date occurs. Use that function to find the most popular transaction date.
.Click to see solution
[%collapsible]
====
[source,R]
----
library(data.table)
myDF <- fread("/anvil/projects/tdm/data/election/itcont1980.txt", quote="")
names(myDF) <- c("CMTE_ID", "AMNDT_IND", "RPT_TP", "TRANSACTION_PGI", "IMAGE_NUM", "TRANSACTION_TP", "ENTITY_TP", "NAME", "CITY", "STATE", "ZIP_CODE", "EMPLOYER", "OCCUPATION", "TRANSACTION_DT", "TRANSACTION_AMT", "OTHER_ID", "TRAN_ID", "FILE_NUM", "MEMO_CD", "MEMO_TEXT", "SUB_ID")
mostpopulardate = function(x) {tail(sort(table(x)), n=1)}
mostpopulardate(myDF$TRANSACTION_DT)
----
----
x
12311979 
    2562 
----
====